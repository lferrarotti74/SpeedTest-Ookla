name: Docker Scout

on:
  pull_request:
    branches:
      - main
    paths-ignore:
      - 'README.md'
      - 'LICENSE'

permissions:
  contents: read
  packages: write
  pull-requests: write

jobs:
  scout-docker-image:
    uses: lferrarotti74/github-workflows-templates/.github/workflows/docker-scout.yml@2e3c31281cb4cc0e4a5df1c133f1c165e2798ed9
    with:
      image_name: lferrarotti74/speedtest-ookla
      compare_tag: latest
      env_file_path: env/.env
      version_var_name: SPEEDTEST_VERSION
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
